!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BootstrapChatUI=t():e.BootstrapChatUI=t()}(self,(()=>(()=>{"use strict";var e={52:(e,t,r)=>{r.r(t)},566:(e,t,r)=>{r.r(t)},523:(e,t,r)=>{r.r(t)},545:(e,t,r)=>{r.r(t)},864:(e,t,r)=>{r.r(t)},892:(e,t,r)=>{r.r(t)},846:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),r(892);var l=o(r(689)),u=i(r(511)),c=i(r(907)),s=i(r(119)),f=i(r(9)),d=i(r(401)),p=i(r(428)),m=i(r(261)),v=r(444),h=i(r(136));t.default=function(e){var t=e.originUserId,r=e.allMessages,n=e.onMessageCreate,a=e.activeRoom,o=e.onRoomChange,i=e.canLoadMessages,b=e.loadMessages,_=e.getContactAvatar,g=e.getContactName,y=e.isContactOnline,w=(0,l.useRef)(null),O=(0,l.useMemo)((function(){var e=(0,v.getLastMessages)(r);return e.sort((function(e,t){return t.timestamp-e.timestamp})),e}),[r]),E=(0,l.useMemo)((function(){return r.filter((function(e){return e.roomId===a&&"dummy"!==e.status}))}),[r,a]),x=(0,l.useMemo)((function(){return{canLoadMessages:i,loadMessages:b,getContactAvatar:_,getContactName:g,isContactOnline:y}}),[i,b,_,g,y]);return l.default.createElement(m.default.Provider,{value:x},l.default.createElement(c.default,{className:"h-100 gx-2"},l.default.createElement(u.default,{md:5,lg:4,xxl:3,className:"h-100 d-none d-md-block"},l.default.createElement("div",{className:"h-100 d-flex flex-column"},l.default.createElement(p.default,{onContactCreate:function(e){return n(e,"",!0)}}),l.default.createElement(s.default,{lastMessages:O,activeRoom:a,activateRoom:o}))),l.default.createElement(u.default,{ref:w,md:7,lg:8,xxl:9,className:"h-100 position-relative"},a&&w.current&&l.default.createElement(h.default,{container:w.current,submit:function(e){return n(a,e,!1)}}),l.default.createElement("div",{className:"h-100 d-flex flex-column gap-3"},l.default.createElement(d.default,{originUserId:t,roomId:a,collection:E}),a&&l.default.createElement(f.default,{submit:function(e){return n(a,e,!1)}})))))}},733:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),r(52);var l=o(r(689)),u=i(r(810)),c=i(r(301)),s=i(r(423)),f=i(r(261));t.default=function(e){var t=e.lastMessage,r=e.active,n=e.activate,a=(0,l.useContext)(f.default).getContactName;return l.default.createElement(u.default,{className:"mb-3 contact",body:!0,bg:r?"success":void 0,onClick:function(){return n(t.roomId)}},l.default.createElement(s.default,{timestamp:t.timestamp,className:"contact__time"}),l.default.createElement("div",{className:"w-100 d-flex align-items-center gap-3"},l.default.createElement("div",null,l.default.createElement(c.default,{size:"4rem",id:t.roomId})),l.default.createElement("div",{style:{minWidth:"0"}},l.default.createElement(u.default.Title,{className:"mb-0 text-truncate"},a(t.roomId)),l.default.createElement(u.default.Text,{className:"text-truncate"},function(e){var t=e.status,r=e.content;if("dummy"===t)return"Â ";var n=r.match(/^data:(.*?);base64,/);return n&&n[1]?"File (".concat(n[1],")"):r}(t)))))}},301:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),r(566);var l=i(r(3)),u=o(r(689)),c=i(r(261));t.default=function(e){var t=e.size,r=e.id,n=e.className,a=(0,u.useContext)(c.default),o=a.getContactAvatar,i=a.getContactName,s=(0,a.isContactOnline)(r);return u.default.createElement("div",{className:(0,l.default)("contact-avatar",n),style:{width:t,height:t}},u.default.createElement("img",{src:o(r),alt:i(r),className:(0,l.default)("contact-avatar__image",s&&"contact-avatar__image--online")}))}},119:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(689)),o=n(r(733));t.default=function(e){var t=e.lastMessages,r=e.activeRoom,n=e.activateRoom;return a.default.createElement("div",{className:"pe-3 h-100 overflow-y-scroll cool-scrollbar"},t.map((function(e){return a.default.createElement(o.default,{key:e.roomId,lastMessage:e,active:r===e.roomId,activate:n})})))}},136:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function l(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}u((n=n.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),r(523);var u=o(r(689)),c=r(985),s=r(6);t.default=function(e){var t=e.container,r=e.submit,n=(0,u.useState)(!1),a=n[0],o=n[1];(0,u.useEffect)((function(){var e=function(e){e.dataTransfer&&e.dataTransfer.items.length&&Array.from(e.dataTransfer.items).find((function(e){return"file"===e.kind}))&&o(!0)};return t.addEventListener("dragover",e),function(){t.removeEventListener("dragover",e)}}),[t]);return a&&u.default.createElement("div",{className:"drop-zone",onDragOver:function(e){e.preventDefault()},onDragLeave:function(){o(!1)},onDrop:function(e){return i(void 0,void 0,void 0,(function(){var t,n,a,i,u;return l(this,(function(l){switch(l.label){case 0:return e.preventDefault(),o(!1),[4,(0,s.getTransferredFiles)(e.dataTransfer)];case 1:t=l.sent(),n=0,a=t,l.label=2;case 2:return n<a.length?(i=a[n],[4,(0,c.convertFileToBase64)(i)]):[3,5];case 3:u=l.sent(),r(u),l.label=4;case 4:return n++,[3,2];case 5:return[2]}}))}))}},u.default.createElement("div",null,"Drop your files or folders here"))}},24:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return o(t,e),t},l=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(r(689)),s=u(r(736)),f=c.default.forwardRef((function(e,t){var r=e.popper,a=e.children,o=(e.show,e.updateCriteria),i=l(e,["popper","children","show","updateCriteria"]);return(0,c.useEffect)((function(){r&&r.scheduleUpdate&&r.scheduleUpdate()}),[o,r]),c.default.createElement(s.default,n({ref:t},i),c.default.createElement(s.default.Body,null,a))}));t.default=f},537:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return o(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),r(545);var u=l(r(3)),c=i(r(689)),s=l(r(13)),f=l(r(484)),d=l(r(24)),p=r(713);t.default=function(e){var t=e.textarea,r=e.keyword,a=e.gridSize,o=e.submit,i=(0,c.useRef)(null),l=(0,c.useState)({top:0,left:0}),m=l[0],v=l[1],h=(0,c.useState)([]),b=h[0],_=h[1],g=(0,c.useState)(0),y=g[0],w=g[1];return(0,c.useEffect)((function(){if(r){var e=(0,f.default)(t,t.selectionStart);v({top:e.top-t.scrollTop-e.height/6,left:e.left}),_((0,p.findEmojis)(r,Math.pow(a,2)))}}),[r,a]),(0,c.useEffect)((function(){if(b.length){w((function(e){return Math.min(Math.max(e,0),b.length-1)}));var e=function(e,t){return t===Math.min(Math.max(t,0),b.length-1)?t:e},r=function(t){["Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)&&t.preventDefault(),"Enter"===t.key&&(t.stopPropagation(),o(b[y].content)),"ArrowLeft"===t.key&&w((function(t){return e(t,t%a==0?t:t-1)})),"ArrowRight"===t.key&&w((function(t){return e(t,t%a==a-1?t:t+1)})),"ArrowUp"===t.key&&w((function(t){return e(t,t-a)})),"ArrowDown"===t.key&&w((function(t){return e(t,t+a)}))};return t.addEventListener("keydown",r),function(){t.removeEventListener("keydown",r)}}}),[b,y,a]),c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{ref:i,className:"position-absolute",style:m}),i.current&&!!b.length&&c.default.createElement(s.default,{target:i.current,show:!0,placement:"top"},(function(e){return c.default.createElement(d.default,n({updateCriteria:r.length},e),c.default.createElement("div",{className:"emoji-grid",style:{gridTemplateColumns:"repeat(".concat(a,", 1fr)")}},b.map((function(e,t){return c.default.createElement("span",{key:e.slug,className:(0,u.default)(y===t&&"active")},e.content)}))))})))}},9:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function l(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}u((n=n.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=r(26),s=r(144),f=r(197),d=o(r(689)),p=u(r(937)),m=r(985),v=u(r(61)),h=u(r(637));t.default=function(e){var t=e.submit,r=(0,d.useState)(""),n=r[0],a=r[1],o=(0,d.useRef)(null),u=function(){n&&(t(n),a(""))};return d.default.createElement("div",{className:"flex-shrink-0"},d.default.createElement("div",{className:"d-flex align-items-end gap-3"},d.default.createElement(h.default,{value:n,onChange:a,onEnter:function(e){e.ctrlKey||e.shiftKey?a((function(e){return e+"\n"})):u()}}),d.default.createElement(p.default,{variant:"primary",onClick:u,disabled:!n.length},d.default.createElement(f.FontAwesomeIcon,{icon:c.faPaperPlane,size:"lg",className:"fa-fw"})),d.default.createElement(p.default,{variant:"secondary",onClick:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.click()}},d.default.createElement("input",{ref:o,type:"file",className:"d-none",multiple:!0,accept:(0,v.default)(),onChange:function(e){return i(void 0,void 0,void 0,(function(){var r,n,a,o,i;return l(this,(function(l){switch(l.label){case 0:if(!e.target.files)return[2];r=Array.from(e.target.files),n=0,a=r,l.label=1;case 1:return n<a.length?(o=a[n],[4,(0,m.convertFileToBase64)(o)]):[3,4];case 2:i=l.sent(),t(i),l.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}}),d.default.createElement(f.FontAwesomeIcon,{icon:s.faPaperclip,size:"lg",className:"fa-fw"}))))}},917:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),r(864);var a=n(r(3)),o=n(r(689)),i=n(r(810)),l=n(r(511)),u=n(r(907)),c=n(r(301)),s=n(r(969)),f=n(r(423)),d=n(r(466));t.default=function(e){var t=e.content,r=e.roomId,n=e.authorId,p=e.timestamp,m=e.status,v=e.original,h=e.prevDifferent,b=e.nextDifferent;return o.default.createElement(u.default,null,o.default.createElement(l.default,{xs:8,className:(0,a.default)("mb-1 d-flex",v?"ms-auto flex-row-reverse":"me-auto flex-row",{"pt-2":h,"pb-2":b})},o.default.createElement(i.default,{className:"message",bg:v?void 0:"success"},!v&&h&&n!==r&&o.default.createElement(c.default,{size:"2rem",id:n,className:"message__author"}),o.default.createElement(f.default,{timestamp:p,className:"message__time"}),v&&o.default.createElement("div",{className:"message__status"},o.default.createElement(s.default,{current:m})),h&&o.default.createElement("svg",{className:(0,a.default)("message__tail","message__tail--".concat(v?"original":"stranger")),viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},o.default.createElement("polygon",{points:"0,0 32,0 16,16"})),o.default.createElement(i.default.Body,null,o.default.createElement(i.default.Text,{className:"message__content"},o.default.createElement(d.default,{content:t}))))))}},466:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(200),o=r(143),i=r(346),l=r(738),u=r(227),c=r(197),s=n(r(689));t.default=function(e){var t=e.content;return/^data:image\/(jpeg|jpg|png|gif|svg\+xml);base64,/.test(t)?s.default.createElement("img",{className:"mb-1",src:t}):/^data:application\/pdf;base64,/.test(t)?s.default.createElement("a",{href:t,download:"document.pdf"},s.default.createElement(c.FontAwesomeIcon,{icon:i.faFilePdf,size:"4x",className:"fa-fw mb-2"})):/^data:application\/vnd.(ms-excel|openxmlformats-officedocument\.spreadsheetml.(sheet|template));base64,/.test(t)?s.default.createElement("a",{href:t,download:"sheet.xlsx"},s.default.createElement(c.FontAwesomeIcon,{icon:o.faFileExcel,size:"4x",className:"fa-fw mb-2"})):/^data:application\/vnd.(msword|openxmlformats-officedocument\.wordprocessingml.(document|template));base64,/.test(t)?s.default.createElement("a",{href:t,download:"document.docx"},s.default.createElement(c.FontAwesomeIcon,{icon:l.faFileWord,size:"4x",className:"fa-fw mb-2"})):/^data:application\/zip;base64,/.test(t)?s.default.createElement("a",{href:t,download:"archive.zip"},s.default.createElement(c.FontAwesomeIcon,{icon:u.faFileZipper,size:"4x",className:"fa-fw mb-2"})):/data:.*?;base64,/.test(t)?s.default.createElement(c.FontAwesomeIcon,{icon:a.faFileCircleExclamation,size:"4x",className:"fa-fw mb-2"}):s.default.createElement("span",null,t)}},401:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return o(t,e),t},l=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function l(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}u((n=n.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(915),f=r(197),d=i(r(689)),p=c(r(917)),m=c(r(261));t.default=function(e){var t=e.originUserId,r=e.roomId,a=e.collection,o=(0,d.useContext)(m.default),i=o.canLoadMessages,c=o.loadMessages,v=(0,d.useState)(!1),h=v[0],b=v[1],_=(0,d.useRef)(null),g=(0,d.useRef)(null),y=(0,d.useRef)(!1),w=a.findLast((function(e){return e.authorId===t})),O=a.length?a[a.length-1]:void 0;return(0,d.useEffect)((function(){_.current&&(_.current.scrollTop=_.current.scrollHeight)}),[null==w?void 0:w.id]),(0,d.useEffect)((function(){_.current&&y.current&&(_.current.scrollTop=_.current.scrollHeight)}),[null==O?void 0:O.id]),(0,d.useEffect)((function(){if(_.current){var e=_.current;e.scrollTop=e.scrollHeight,b(!1)}}),[r]),(0,d.useEffect)((function(){if(r&&_.current){var e=_.current,t=function(){return l(void 0,void 0,void 0,(function(){var t,n,a,o,l;return u(this,(function(u){switch(u.label){case 0:return y.current=e.scrollTop>=e.scrollHeight-e.clientHeight,h||!i(r)?[2]:e.scrollTop<1?(t=e.scrollHeight,b(!0),[4,c(r)]):[3,2];case 1:u.sent(),n=e.scrollHeight-t,a=null!==(l=null===(o=g.current)||void 0===o?void 0:o.clientHeight)&&void 0!==l?l:0,e.scrollTop=n-a,b(!1),u.label=2;case 2:return[2]}}))}))};return e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}}),[r,h,i,c]),d.default.createElement("div",{ref:_,className:"h-100 bg-primary-subtle px-4 py-1 overflow-y-scroll cool-scrollbar"},h&&d.default.createElement("div",{ref:g,className:"text-center"},d.default.createElement(f.FontAwesomeIcon,{icon:s.faSpinner,size:"xl",className:"fa-fw fa-spin-pulse"})),a.map((function(e,r){return d.default.createElement(p.default,n({key:e.id},e,{original:e.authorId===t,prevDifferent:e.authorId!==(a[r-1]||{}).authorId,nextDifferent:e.authorId!==(a[r+1]||{}).authorId}))})))}},969:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(790),o=r(530),i=r(197),l=n(r(3)),u=n(r(689));t.default=function(e){var t=e.current;return"new"===t?null:u.default.createElement(i.FontAwesomeIcon,{icon:["delivered","seen"].includes(t)?o.faCheckDouble:a.faCheck,size:"sm",className:(0,l.default)("fa-fw","seen"===t?"text-primary":"text-secondary")})}},423:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(r(3)),u=o(r(689));t.default=function(e){var t=e.timestamp,r=e.className,n=(0,u.useMemo)((function(){var e=new Date(t);return e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")}),[t]);return u.default.createElement("small",{className:(0,l.default)(r,"text-muted lh-1")},n)}},428:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(338),o=r(197),i=n(r(689)),l=n(r(937));t.default=function(e){var t=e.onContactCreate;return i.default.createElement("div",{className:"mb-3 me-3 pe-1 d-flex flex-row justify-content-between"},i.default.createElement("div",null),i.default.createElement(l.default,{onClick:function(){var e=prompt("Please enter contact id to start a conversation:","");e&&t(e)}},i.default.createElement(o.FontAwesomeIcon,{icon:a.faUserPlus,size:"lg",className:"fa-fw"})))}},637:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(r(689)),u=i(r(226)),c=r(713),s=i(r(537));t.default=function(e){var t=e.value,r=e.onChange,n=e.onEnter,a=(0,l.useRef)(null),o=(0,l.useState)(null),i=o[0],f=o[1];(0,l.useEffect)((function(){a.current&&t.endsWith("\n")&&(a.current.scrollTop=a.current.scrollHeight)}),[t]);return l.default.createElement("div",{className:"w-100 position-relative"},l.default.createElement(u.default.Control,{ref:a,as:"textarea",rows:Math.min(3,t.split("\n").length),className:"w-100",style:{resize:"none"},value:t,onChange:function(e){return r(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),n(e))},onKeyUp:function(){if(a.current){var e=a.current;e.selectionStart===e.selectionEnd&&f((0,c.findEmojiKeyword)(t,e.selectionStart))}}}),a.current&&i&&l.default.createElement(s.default,{gridSize:3,textarea:a.current,keyword:i,submit:function(e){if(a.current){var n=a.current;if(n.selectionStart===n.selectionEnd){var o=(0,c.replaceWithEmoji)(t,n.selectionStart,e),i=o[0],l=o[1];r(i),n.selectionStart=l,n.selectionEnd=l}}}}))}},985:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertFileToBase64=void 0,t.convertFileToBase64=function(e){return new Promise((function(t,r){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){t(n.result)},n.onerror=function(e){r(e)}}))}},261:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(689).createContext)({canLoadMessages:function(){return!1},loadMessages:function(){return Promise.resolve()},getContactAvatar:function(){return""},getContactName:function(){return""},isContactOnline:function(){return!1}});t.default=n},6:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function l(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}u((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};function a(e){return e.webkitGetAsEntry?e.webkitGetAsEntry():null}function o(e){return new Promise((function(t,r){e.createReader().readEntries(t,r)}))}function i(e,t,a){return void 0===t&&(t=[]),void 0===a&&(a=""),r(this,void 0,void 0,(function(){var r,l,u;return n(this,(function(n){switch(n.label){case 0:return e?function(e){return e.isDirectory}(e)?[4,o(e)]:[3,6]:[2,[]];case 1:r=n.sent(),l=0,u=r,n.label=2;case 2:return l<u.length?[4,i(u[l],t,a+e.name+"/")]:[3,5];case 3:n.sent(),n.label=4;case 4:return l++,[3,2];case 5:return[3,7];case 6:t.push(e),n.label=7;case 7:return[2,t]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.getTransferredFiles=void 0,t.getTransferredFiles=function(e){return r(this,void 0,void 0,(function(){var t,o;return n(this,(function(l){switch(l.label){case 0:return t=Array.from(e.items).map(a),[4,Promise.all(t.map((function(e){return i(e)})))];case 1:return o=l.sent(),[4,Promise.all(o.flat().map((function(e){return function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,new Promise((function(t,r){return e.file(t,r)}))]}))}))}(e)})))];case 2:return[2,l.sent()]}}))}))}},713:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.replaceWithEmoji=t.findEmojiKeyword=t.findEmojis=void 0;var a=n(r(7));t.findEmojis=function(e,t){return Object.entries(a.default).filter((function(t){t[0];return t[1].name.toLowerCase().includes(e.toLowerCase())})).map((function(e){var t=e[0];return{slug:e[1].slug,content:t}})).slice(0,t)},t.findEmojiKeyword=function(e,t){var r,n,a=e.lastIndexOf(":",t);return null!==(n=null===(r=e.slice(a,t).match(/^:(\w+)/))||void 0===r?void 0:r[1])&&void 0!==n?n:null},t.replaceWithEmoji=function(e,t,r){var n=e.lastIndexOf(":",t),a=e.slice(0,n)+r+e.slice(t);return[a,t-(e.length-a.length)]}},444:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLastMessages=void 0,t.getLastMessages=function(e){for(var t,r,n={},a=0,o=e;a<o.length;a++){var i=o[a];(null!==(r=null===(t=n[i.roomId])||void 0===t?void 0:t.timestamp)&&void 0!==r?r:0)<i.timestamp&&(n[i.roomId]=i)}return Object.values(n)}},61:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/pdf","application/zip"].join(",")}},790:e=>{e.exports=require("@fortawesome/free-solid-svg-icons/faCheck")},530:e=>{e.exports=require("@fortawesome/free-solid-svg-icons/faCheckDouble")},200:e=>{e.exports=require("@fortawesome/free-solid-svg-icons/faFileCircleExclamation")},143:e=>{e.exports=require("@fortawesome/free-solid-svg-icons/faFileExcel")},346:e=>{e.exports=require("@fortawesome/free-solid-svg-icons/faFilePdf")},738:e=>{e.exports=require("@fortawesome/free-solid-svg-icons/faFileWord")},227:e=>{e.exports=require("@fortawesome/free-solid-svg-icons/faFileZipper")},26:e=>{e.exports=require("@fortawesome/free-solid-svg-icons/faPaperPlane")},144:e=>{e.exports=require("@fortawesome/free-solid-svg-icons/faPaperclip")},915:e=>{e.exports=require("@fortawesome/free-solid-svg-icons/faSpinner")},338:e=>{e.exports=require("@fortawesome/free-solid-svg-icons/faUserPlus")},197:e=>{e.exports=require("@fortawesome/react-fontawesome")},3:e=>{e.exports=require("classnames")},689:e=>{e.exports=require("react")},937:e=>{e.exports=require("react-bootstrap/Button")},810:e=>{e.exports=require("react-bootstrap/Card")},511:e=>{e.exports=require("react-bootstrap/Col")},226:e=>{e.exports=require("react-bootstrap/Form")},13:e=>{e.exports=require("react-bootstrap/Overlay")},736:e=>{e.exports=require("react-bootstrap/Popover")},907:e=>{e.exports=require("react-bootstrap/Row")},484:e=>{e.exports=require("textarea-caret")},7:e=>{e.exports=require("unicode-emoji-json")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}return r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(846)})()));